(function(t){function e(e){for(var o,a,c=e[0],d=e[1],h=e[2],l=0,s=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&s.push(r[a][0]),r[a]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);u&&u(e);while(s.length)s.shift()();return i.push.apply(i,h||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var d=n[a];0!==r[d]&&(o=!1)}o&&(i.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},i=[];function a(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"2d9b5526"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=a(t);var h=new Error;i=function(e){d.onerror=d.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",h.name="ChunkLoadError",h.type=o,h.request=i,n[1](h)}r[t]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],h=d.push.bind(d);d.push=e,d=d.slice();for(var l=0;l<d.length;l++)e(d[l]);var u=h;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("85ec"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],a=(n("034f"),n("2877")),c={},d=Object(a["a"])(c,r,i,!1,null,null,null),h=d.exports,l=(n("d3b7"),n("8c4f")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._m(0),n("mind",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shortcut-key"},[n("div",[n("kbd",[t._v("Ctrl")]),t._v(" + "),n("kbd",[t._v("Enter")]),t._v(" 插入子节点 ")]),n("div",[n("kbd",[t._v("Alt")]),t._v(" + "),n("kbd",[t._v("Enter")]),t._v(" 插入兄弟节点 ")]),n("div",[n("kbd",[t._v("Ctrl")]),t._v(" + "),n("kbd",[t._v("Delete")]),t._v(" 删除子节点 ")])])}],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mind",style:{width:t.width,height:t.height}},[n("svg",{style:{width:t.width,height:t.height},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},t._l(t.links,(function(e,o){return n("path",{key:o,attrs:{d:e.d,stroke:"#333",fill:"transparent","stroke-width":"2px"},on:{click:function(n){return t.expandChild(e)}}})})),0),t._l(t.nodes,(function(e,o){return n("Node",{key:o,attrs:{data:e},on:{change:t.onChange}})}))],2)},p=[],g=(n("99af"),n("4160"),n("a15b"),n("13d5"),n("159b"),n("2909")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"node",staticClass:"node",style:{top:t.data.y+"px",left:t.data.x+"px",minWidth:t.data.w+"px",minHeight:t.data.h+"px"},attrs:{id:"node-"+t.data.id,contenteditable:""},on:{blur:t.onBlur,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?(e.preventDefault(),t.addChildNode(e)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:e.ctrlKey?(e.preventDefault(),t.$emit("ctrl-delete")):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.altKey?(e.preventDefault(),t.$emit("alt-enter")):null}]}},[t._v(" "+t._s(t.data.startY)),n("br"),t._v(" childrenHeight:"+t._s(t.data.childrenHeight)),n("br"),t._v(" h"+t._s(t.data.h)+" ")]),t.data.expand?t._l(t.data.children,(function(e,o){return n("node",{key:o,attrs:{data:e},on:{"alt-enter":function(e){return t.addBrotherNode(o)},"ctrl-delete":function(e){return t.delNode(o)},change:t.onChange}})})):t._e()],2)},m=[],y=(n("a434"),n("a9e3"),1),x={name:"node",props:{data:Object,index:Number,x:Number,y:Number,w:Number,h:Number},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,drag:{start:!1,x1:0,x2:0,y1:0,y2:0}}},mounted:function(){},methods:{addChildNode:function(){this.data.children.push({id:++y,deep:this.data.deep+1,x:this.data.x+300,y:0,startY:0,w:100,h:80,gap:40,childrenHeight:0,content:"",expand:!0,children:[]}),this.onChange(y)},addBrotherNode:function(t){this.data.children.splice(t+1,0,{id:++y,deep:this.data.deep+1,x:this.data.x+300,y:0,startY:0,w:100,h:80,gap:40,childrenHeight:0,content:"",expand:!0,children:[]}),this.onChange(y)},delNode:function(t){this.data.children.splice(t,1),this.onChange(this.data.id)},onChange:function(t){this.$emit("change",t)},onBlur:function(t){this.data.h=0,this.$nextTick((function(){var e=this.$refs.node.getBoundingClientRect();this.data.w=Math.floor(e.width),this.data.h=Math.max(Math.floor(e.height),80),this.data.content=t.target.textContent,this.onChange()}))}}},b=x,w=(n("8256"),Object(a["a"])(b,v,m,!1,null,null,null)),_=w.exports,k={name:"mind",components:{Node:_},props:{msg:String},data:function(){return{links:[],width:0,height:0,nodes:[{id:1,deep:0,isRoot:!0,x:Math.floor(window.innerWidth/2-50),y:Math.floor(window.innerHeight/2-40),startY:Math.floor(window.innerHeight/2-60),w:100,h:80,gap:40,content:"中心主题",expand:!0,childrenHeight:0,children:[]}]}},created:function(){this.onChange()},computed:{},methods:{onChange:function(t){this.calcChildrenHeight(),this.calcRoot(),this.calcPos(),this.calcLinks(),t&&this.$nextTick((function(){var e=document.getElementById("node-".concat(t));if(e){var n=e.getBoundingClientRect();n.bottom>window.innerHeight?document.documentElement.scrollTop+=n.bottom-window.innerHeight:n.top<0&&(document.documentElement.scrollTop+=n.top)}}))},expandChild:function(t){"expand"==t.type&&(t.node.expand=!t.node.expand,this.onChange(t.node.id))},calcChildrenHeight:function(){var t=0,e=function e(n){if(n.children.length&&n.expand){var o=0;return n.children.forEach((function(t){o+=e(t)})),n.childrenHeight=Math.max(o,n.h+n.gap),o}return n.childrenHeight=n.h+n.gap,t=Math.max(t,n.deep),n.childrenHeight};e(this.nodes[0]);var n=function t(e){e.children.length&&[{startY:e.startY,childrenHeight:0}].concat(Object(g["a"])(e.children)).reduce((function(e,n){return n.startY=e.startY+e.childrenHeight,t(n),n}))};n(this.nodes[0]),this.width=this.nodes[0].x+300*(t+1)+10+"px"},calcRoot:function(){var t=this;this.nodes.forEach((function(e){t.height=e.y+e.childrenHeight+"px",e.y=e.childrenHeight/2-e.h/2}))},calcPos:function(){var t=function t(e){if(e.expand&&e.children.length){e.children.forEach((function(e){t(e)}));var n=e.children[0],o=e.children[e.children.length-1],r=n.y+n.h/2+(o.y+o.h/2-n.y-n.h/2)/2-e.h/2;e.y=r}else e.y=e.startY+e.gap/2};t(this.nodes[0])},calcLinks:function(){var t=[],e=function e(n){n.forEach((function(n){var o=[n.x+n.w,n.y+Math.floor(n.h/2)],r=[o[0]+20,o[1]],i=[r[0]+16,o[1]],a="M".concat(r.join(" ")," A 8 8, 0, 1, 0, ").concat(i.join(" ")," A 8 8, 0, 1, 0, ").concat(r.join(" ")),c="M".concat(r[0]+4," ").concat(o[1]," L").concat(i[0]-4," ").concat(o[1]),d="M".concat(r[0]+(i[0]-r[0])/2," ").concat(o[1]-4," L").concat(r[0]+(i[0]-r[0])/2," ").concat(o[1]+4);if(n.children.length)if(t.push({d:"M".concat(o.join(" ")," L").concat(r.join(" "))}),n.expand)t.push({type:"expand",node:n,d:"".concat(a," ").concat(c)}),n.children.forEach((function(e){var n=[e.x,e.y+Math.floor(e.h/2)],o=[Math.floor((i[0]+e.x)/2)-20,n[1]];t.push({d:"M".concat(i.join(" ")," Q ").concat(o.join(" ")," ").concat(n.join(" ")," ")})})),e(n.children);else{t.push({type:"expand",node:n,d:"".concat(a," ").concat(c," ").concat(d)})}}))};e(this.nodes),this.links=t}}},C=k,j=(n("7f76"),Object(a["a"])(C,f,p,!1,null,null,null)),H=j.exports,E={name:"Home",components:{mind:H}},M=E,O=(n("de16"),Object(a["a"])(M,u,s,!1,null,null,null)),N=O.exports;o["a"].use(l["a"]);var $=[{path:"/",name:"Home",component:N},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],P=new l["a"]({routes:$}),Y=P;o["a"].config.productionTip=!1,new o["a"]({router:Y,render:function(t){return t(h)}}).$mount("#app")},"7f76":function(t,e,n){"use strict";var o=n("e670"),r=n.n(o);r.a},8256:function(t,e,n){"use strict";var o=n("f7a4"),r=n.n(o);r.a},"85ec":function(t,e,n){},"8d91":function(t,e,n){},de16:function(t,e,n){"use strict";var o=n("8d91"),r=n.n(o);r.a},e670:function(t,e,n){},f7a4:function(t,e,n){}});
//# sourceMappingURL=app.f935fb2a.js.map