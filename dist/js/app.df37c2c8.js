(function(t){function e(e){for(var i,o,c=e[0],h=e[1],d=e[2],l=0,s=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&s.push(r[o][0]),r[o]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);u&&u(e);while(s.length)s.shift()();return a.push.apply(a,d||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,o=1;o<n.length;o++){var h=n[o];0!==r[h]&&(i=!1)}i&&(a.splice(e--,1),t=c(c.s=n[0]))}return t}var i={},r={app:0},a=[];function o(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"2d9b5526"}[t]+".js"}function c(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=i);var a,h=document.createElement("script");h.charset="utf-8",h.timeout=120,c.nc&&h.setAttribute("nonce",c.nc),h.src=o(t);var d=new Error;a=function(e){h.onerror=h.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",d.name="ChunkLoadError",d.type=i,d.request=a,n[1](d)}r[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:h})}),12e4);h.onerror=h.onload=a,document.head.appendChild(h)}return Promise.all(e)},c.m=t,c.c=i,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)c.d(n,i,function(e){return t[e]}.bind(null,i));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var h=window["webpackJsonp"]=window["webpackJsonp"]||[],d=h.push.bind(h);h.push=e,h=h.slice();for(var l=0;l<h.length;l++)e(h[l]);var u=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var i=n("85ec"),r=n.n(i);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],o=(n("034f"),n("2877")),c={},h=Object(o["a"])(c,r,a,!1,null,null,null),d=h.exports,l=(n("d3b7"),n("8c4f")),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._m(0),n("mind")],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shortcut-key"},[n("div",[n("kbd",[t._v("Ctrl")]),t._v(" + "),n("kbd",[t._v("Enter")]),t._v(" 插入子节点 ")]),n("div",[n("kbd",[t._v("Alt")]),t._v(" + "),n("kbd",[t._v("Enter")]),t._v(" 插入兄弟节点 ")]),n("div",[n("kbd",[t._v("Ctrl")]),t._v(" + "),n("kbd",[t._v("Delete")]),t._v(" 删除子节点 ")])])}],p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mind",style:{width:t.width,height:t.height}},[n("svg",{style:{width:t.width,height:t.height},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},t._l(t.links,(function(e,i){return n("path",{key:i,attrs:{d:e.d,stroke:"#333",fill:"transparent","stroke-width":"2px"},on:{click:function(n){return t.expandChild(e)}}})})),0),t._l(t.nodes,(function(e,i){return n("Node",{key:i,attrs:{data:e},on:{change:t.onChange}})}))],2)},f=[],g=(n("99af"),n("4160"),n("a15b"),n("13d5"),n("159b"),n("2909")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"node",staticClass:"node",style:{top:t.data.y+"px",left:t.data.x+"px",minWidth:t.data.w+"px",minHeight:t.data.h+"px"},attrs:{id:"node-"+t.data.id,contenteditable:""},on:{blur:t.onBlur,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?(e.preventDefault(),t.addChildNode(e)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:e.ctrlKey?(e.preventDefault(),t.$emit("ctrl-delete")):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.altKey?(e.preventDefault(),t.$emit("alt-enter")):null}]}},[t._v(" "+t._s(t.data.startY)),n("br"),t._v(" ch:"+t._s(t.data.childrenHeight)),n("br"),t._v(" rch:"+t._s(t.data.childRealHeight)),n("br"),t._v(" h"+t._s(t.data.h)+" ")]),t.data.expand?t._l(t.data.children,(function(e,i){return n("node",{key:i,attrs:{data:e},on:{"alt-enter":function(e){return t.addBrotherNode(i)},"ctrl-delete":function(e){return t.delNode(i)},change:t.onChange}})})):t._e()],2)},y=[],m=(n("a434"),n("a9e3"),1),x={name:"node",props:{data:Object,index:Number,x:Number,y:Number,w:Number,h:Number},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,drag:{start:!1,x1:0,x2:0,y1:0,y2:0}}},mounted:function(){},methods:{addChildNode:function(){this.data.children.push({id:++m,deep:this.data.deep+1,x:this.data.x+300,y:0,startY:0,w:100,h:80,gap:40,childrenHeight:0,content:"",expand:!0,children:[]}),this.onChange(m)},addBrotherNode:function(t){this.data.children.splice(t+1,0,{id:++m,deep:this.data.deep+1,x:this.data.x+300,y:0,startY:0,w:100,h:80,gap:40,childrenHeight:0,content:"",expand:!0,children:[]}),this.onChange(m)},delNode:function(t){this.data.children.splice(t,1),this.onChange(this.data.id)},onChange:function(t){this.$emit("change",t)},onBlur:function(t){this.data.h=0,this.$nextTick((function(){var e=this.$refs.node.getBoundingClientRect();this.data.w=Math.floor(e.width),this.data.h=Math.max(Math.floor(e.height),80),this.data.content=t.target.textContent,this.onChange()}))}}},b=x,w=(n("8256"),Object(o["a"])(b,v,y,!1,null,null,null)),_=w.exports,k={name:"mind",components:{Node:_},props:{data:Array},data:function(){return{links:[],width:0,height:0,nodes:this.data||[{id:1,deep:0,isRoot:!0,x:10,y:Math.floor(window.innerHeight/2-40),startY:Math.floor(window.innerHeight/2-60),w:100,h:80,gap:40,content:"中心主题",expand:!0,childrenHeight:0,children:[]}]}},created:function(){this.onChange()},computed:{},methods:{onChange:function(t){this.calcChildrenHeight(),this.calcRoot(),this.calcPos(),this.calcLinks(),t&&this.$nextTick((function(){var e=document.getElementById("node-".concat(t));if(e){var n=e.getBoundingClientRect();n.bottom>window.innerHeight?document.documentElement.scrollTop+=n.bottom-window.innerHeight:n.top<0&&(document.documentElement.scrollTop+=n.top)}}))},expandChild:function(t){"expand"==t.type&&(t.node.expand=!t.node.expand,this.onChange(t.node.id))},calcChildrenHeight:function(){var t=0,e=function e(n){if(n.children.length&&n.expand){var i=0;return n.children.forEach((function(t){i+=e(t)})),n.childRealHeight=i,n.childrenHeight=Math.max(i,n.h+n.gap),i}return n.childrenHeight=n.h+n.gap,t=Math.max(t,n.deep),n.childrenHeight};e(this.nodes[0]);var n=function t(e){if(e.children.length){var n=e.startY;e.childRealHeight<e.h+e.gap&&(n=e.startY+(e.h+e.gap-e.childRealHeight)/2),[{startY:n,childrenHeight:0}].concat(Object(g["a"])(e.children)).reduce((function(e,n){return n.startY=e.startY+e.childrenHeight,t(n),n}))}};n(this.nodes[0]),this.width=this.nodes[0].x+300*(t+1)+10+"px"},calcRoot:function(){var t=this;this.nodes.forEach((function(e){t.height=e.y+e.childrenHeight+"px",e.y=e.childrenHeight/2-e.h/2}))},calcPos:function(){var t=function t(e){if(e.expand&&e.children.length){e.children.forEach((function(e){t(e)}));var n=e.children[0],i=e.children[e.children.length-1],r=n.y+n.h/2+(i.y+i.h/2-n.y-n.h/2)/2-e.h/2;e.y=r}else e.y=e.startY+e.gap/2};t(this.nodes[0])},calcLinks:function(){var t=[],e=function e(n){n.forEach((function(n){var i=[n.x+n.w,n.y+Math.floor(n.h/2)],r=[i[0]+20,i[1]],a=[r[0]+16,i[1]],o="M".concat(r.join(" ")," A 8 8, 0, 1, 0, ").concat(a.join(" ")," A 8 8, 0, 1, 0, ").concat(r.join(" ")),c="M".concat(r[0]+4," ").concat(i[1]," L").concat(a[0]-4," ").concat(i[1]),h="M".concat(r[0]+(a[0]-r[0])/2," ").concat(i[1]-4," L").concat(r[0]+(a[0]-r[0])/2," ").concat(i[1]+4);n.children.length&&(t.push({d:"M".concat(i.join(" ")," L").concat(r.join(" "))}),n.expand?(t.push({type:"expand",node:n,d:"".concat(o," ").concat(c)}),n.children.forEach((function(e){var n=[e.x,e.y+Math.floor(e.h/2)],i=[Math.floor((a[0]+e.x)/2)-20,n[1]];t.push({d:"M".concat(a.join(" ")," Q ").concat(i.join(" ")," ").concat(n.join(" ")," ")})})),e(n.children)):t.push({type:"expand",node:n,d:"".concat(o," ").concat(c," ").concat(h)}))}))};e(this.nodes),this.links=t}}},C=k,H=(n("7f76"),Object(o["a"])(C,p,f,!1,null,null,null)),j=H.exports,E={name:"Home",components:{mind:j},data:function(){return{data:[{id:1,deep:0,isRoot:!0,x:10,y:619,startY:285,w:100,h:80,gap:40,content:" 285 ch:360 h0 ",expand:!0,childrenHeight:360,children:[{id:2,deep:1,x:310,y:111,startY:285,w:100,h:468,gap:40,childrenHeight:508,content:" 285 ch:508 h0 ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80",expand:!0,children:[{id:5,deep:2,x:610,y:305,startY:285,w:100,h:80,gap:40,childrenHeight:120,content:" 285 ch:120 h0 ",expand:!0,children:[]}]},{id:3,deep:1,x:310,y:813,startY:793,w:100,h:80,gap:40,childrenHeight:120,content:"",expand:!0,children:[]},{id:4,deep:1,x:310,y:933,startY:913,w:100,h:80,gap:40,childrenHeight:120,content:"",expand:!0,children:[]}]}]}}},O=E,M=(n("de16"),Object(o["a"])(O,u,s,!1,null,null,null)),Y=M.exports;i["a"].use(l["a"]);var N=[{path:"/",name:"Home",component:Y},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],$=new l["a"]({routes:N}),P=$;i["a"].config.productionTip=!1,new i["a"]({router:P,render:function(t){return t(d)}}).$mount("#app")},"7f76":function(t,e,n){"use strict";var i=n("e670"),r=n.n(i);r.a},8256:function(t,e,n){"use strict";var i=n("f7a4"),r=n.n(i);r.a},"85ec":function(t,e,n){},"8d91":function(t,e,n){},de16:function(t,e,n){"use strict";var i=n("8d91"),r=n.n(i);r.a},e670:function(t,e,n){},f7a4:function(t,e,n){}});
//# sourceMappingURL=app.df37c2c8.js.map