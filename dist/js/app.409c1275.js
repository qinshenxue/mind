(function(t){function e(e){for(var a,o,c=e[0],d=e[1],h=e[2],s=0,u=[];s<c.length;s++)o=c[s],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);l&&l(e);while(u.length)u.shift()();return r.push.apply(r,h||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,o=1;o<n.length;o++){var d=n[o];0!==i[d]&&(a=!1)}a&&(r.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},r=[];function o(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"2d9b5526"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var r,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(t);var h=new Error;r=function(e){d.onerror=d.onload=null,clearTimeout(s);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",h.name="ChunkLoadError",h.type=a,h.request=r,n[1](h)}i[t]=void 0}};var s=setTimeout((function(){r({type:"timeout",target:d})}),12e4);d.onerror=d.onload=r,document.head.appendChild(d)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],h=d.push.bind(d);d.push=e,d=d.slice();for(var s=0;s<d.length;s++)e(d[s]);var l=h;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},r=[],o=(n("034f"),n("2877")),c={},d=Object(o["a"])(c,i,r,!1,null,null,null),h=d.exports,s=(n("d3b7"),n("8c4f")),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[t._m(0),n("mind")],1)},u=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shortcut-key"},[n("div",[n("kbd",[t._v("Ctrl")]),t._v(" + "),n("kbd",[t._v("Enter")]),t._v(" 插入子节点 ")]),n("div",[n("kbd",[t._v("Alt")]),t._v(" + "),n("kbd",[t._v("Enter")]),t._v(" 插入兄弟节点 ")]),n("div",[n("kbd",[t._v("Ctrl")]),t._v(" + "),n("kbd",[t._v("Delete")]),t._v(" 删除子节点 ")])])}],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mind",style:{width:t.width,height:t.height}},[n("svg",{style:{width:t.width,height:t.height},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},t._l(t.links,(function(e,a){return n("path",{key:a,attrs:{d:e.d,stroke:"#333",fill:"transparent","stroke-width":"2px"},on:{click:function(n){return t.expandChild(e)}}})})),0),t._l(t.nodes,(function(e,a){return n("Node",{key:a,attrs:{data:e},on:{change:t.onChange}})}))],2)},p=[],g=(n("99af"),n("4160"),n("a15b"),n("13d5"),n("fb6a"),n("25f0"),n("159b"),n("2909")),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"node",staticClass:"node",class:{"is-root":t.data.isRoot},style:{top:t.data.y+"px",left:t.data.x+"px",minWidth:t.data.w+"px",minHeight:t.data.h+"px"},attrs:{id:"node-"+t.data.id,contenteditable:""},on:{blur:t.onBlur,keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.ctrlKey?(e.preventDefault(),t.addChildNode(e)):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:e.ctrlKey?(e.preventDefault(),t.$emit("ctrl-delete")):null},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.altKey?(e.preventDefault(),t.$emit("alt-enter")):null}],mousedown:t.dragStart,paste:function(e){return e.preventDefault(),t.onPaste(e)}}}),t.data.expand?t._l(t.data.children,(function(e,a){return n("node",{key:a,attrs:{data:e},on:{"alt-enter":function(e){return t.addBrotherNode(a)},"ctrl-delete":function(e){return t.delNode(a)},change:t.onChange}})})):t._e()],2)},v=[],x=(n("c975"),n("a434"),n("a9e3"),{name:"node",inject:["mind"],props:{data:Object,index:Number,x:Number,y:Number,w:Number,h:Number},data:function(){return{top:this.y,left:this.x,width:this.w,height:this.h,drag:{start:!1,x1:0,x2:0,y1:0,y2:0}}},mounted:function(){document.addEventListener("mousemove",this.dragging),document.addEventListener("mouseup",this.dragEnd)},methods:{getUuid:function(){return Math.random().toString(36).slice(2)},addChildNode:function(){var t=this.getUuid();this.data.children.push({id:t,deep:this.data.deep+1,x:this.data.x+300,y:0,startY:0,w:100,h:80,gap:40,childrenHeight:0,edit:!0,content:"",expand:!0,children:[]}),this.onChange(t)},addBrotherNode:function(t){var e=this.getUuid();this.data.children.splice(t+1,0,{id:e,deep:this.data.deep+1,x:this.data.x+300,y:0,startY:0,w:100,h:80,gap:40,childrenHeight:0,edit:!0,content:"",expand:!0,children:[]}),this.onChange(e)},delNode:function(t){this.data.children.splice(t,1),this.onChange()},onPaste:function(t){var e=(t.clipboardData||window.clipboardData).items,n=null;if(e&&e.length)for(var a=0;a<e.length;a++)if(-1!==e[a].type.indexOf("image")){n=e[a].getAsFile();break}if(n){var i=new FileReader;i.onload=function(t){document.execCommand("insertImage",!1,t.target.result)},i.readAsDataURL(n)}else{var r=t.clipboardData||window.clipboardData,o=r.getData("Text");document.execCommand("insertText",!1,o)}},onChange:function(t){this.$emit("change",t)},onBlur:function(t){this.mind.focus||(this.data.h=0,this.$nextTick((function(){var e=this.$refs.node.getBoundingClientRect();this.data.w=Math.floor(e.width),this.data.h=Math.max(Math.floor(e.height),80),this.data.content=t.target.textContent,this.onChange()})))},dragStart:function(t){var e=this;this.data.isRoot&&(window.clearTimeout(this.timeId),this.timeId=setTimeout((function(){e.drag.start=!0,e.drag.x1=t.pageX,e.drag.y1=t.pageY,e.drag.x=e.data.x,e.drag.y=e.data.startY}),200))},dragging:function(t){this.drag.start&&(this.data.x=this.drag.x+t.pageX-this.drag.x1,this.data.startY=this.drag.y+t.pageY-this.drag.y1,this.$emit("change"))},dragEnd:function(){window.clearTimeout(this.timeId),this.drag.start&&(this.drag.start=!1)}}}),y=x,w=(n("8256"),Object(o["a"])(y,m,v,!1,null,null,null)),b=w.exports,k={name:"mind",provide:function(){return{mind:this}},components:{Node:b},props:{data:Array},data:function(){return{focus:!1,links:[],width:0,height:0,nodes:this.data||[{id:Math.random().toString(36).slice(2),deep:0,isRoot:!0,x:10,y:Math.floor(window.innerHeight/2-40),startY:Math.floor(window.innerHeight/2-60),w:100,h:80,gap:40,content:"中心主题",expand:!0,childrenHeight:0,children:[]}]}},created:function(){this.onChange()},computed:{},methods:{onChange:function(t){this.calcChildrenHeight(),this.calcPos(),this.calcLinks(),t&&(this.focus=!0,this.$nextTick((function(){document.getElementById("node-".concat(t)).focus(),this.focus=!1})))},expandChild:function(t){"expand"==t.type&&(t.node.expand=!t.node.expand,this.onChange(t.node.id))},calcChildrenHeight:function(){var t=0,e=this.nodes[0],n=function e(n){if(n.children.length&&n.expand){var a=0;return n.children.forEach((function(t){a+=e(t)})),n.childRealHeight=a,n.childrenHeight=Math.max(a,n.h+n.gap),a}return n.childrenHeight=n.h+n.gap,t=Math.max(t,n.deep),n.childrenHeight};n(e);var a=function t(e){if(e.children.length){var n=e.startY;e.childRealHeight<e.h+e.gap&&(n=e.startY+(e.h+e.gap-e.childRealHeight)/2),[{startY:n,childrenHeight:0}].concat(Object(g["a"])(e.children)).reduce((function(n,a){return a.x=e.x+300,a.startY=n.startY+n.childrenHeight,t(a),a}))}};a(e),this.width=e.x+300*(t+1)+10+"px",this.height=e.y+e.childrenHeight+"px"},calcPos:function(){var t=function t(e){if(e.expand&&e.children.length){e.children.forEach((function(e){t(e)}));var n=e.children[0],a=e.children[e.children.length-1],i=n.y+n.h/2+(a.y+a.h/2-n.y-n.h/2)/2-e.h/2;e.y=i}else e.y=e.startY+e.gap/2};t(this.nodes[0])},calcLinks:function(){var t=[],e=function e(n){n.forEach((function(n){var a=[n.x+n.w,n.y+Math.floor(n.h/2)],i=[a[0]+20,a[1]],r=[i[0]+16,a[1]],o="M".concat(i.join(" ")," A 8 8, 0, 1, 0, ").concat(r.join(" ")," A 8 8, 0, 1, 0, ").concat(i.join(" ")),c="M".concat(i[0]+4," ").concat(a[1]," L").concat(r[0]-4," ").concat(a[1]),d="M".concat(i[0]+(r[0]-i[0])/2," ").concat(a[1]-4," L").concat(i[0]+(r[0]-i[0])/2," ").concat(a[1]+4);n.children.length&&(t.push({d:"M".concat(a.join(" ")," L").concat(i.join(" "))}),n.expand?(t.push({type:"expand",node:n,d:"".concat(o," ").concat(c)}),n.children.forEach((function(e){var n=[e.x,e.y+Math.floor(e.h/2)],a=[Math.floor((r[0]+e.x)/2)-20,n[1]];t.push({d:"M".concat(r.join(" ")," Q ").concat(a.join(" ")," ").concat(n.join(" ")," ")})})),e(n.children)):t.push({type:"expand",node:n,d:"".concat(o," ").concat(c," ").concat(d)}))}))};e(this.nodes),this.links=t}}},_=k,C=(n("7f76"),Object(o["a"])(_,f,p,!1,null,null,null)),j=C.exports,H={name:"Home",components:{mind:j},data:function(){return{data:[{id:1,deep:0,isRoot:!0,x:10,y:619,startY:285,w:100,h:80,gap:40,content:" 285 ch:360 h0 ",expand:!0,childrenHeight:360,children:[{id:2,deep:1,x:310,y:111,startY:285,w:100,h:468,gap:40,childrenHeight:508,content:" 285 ch:508 h0 ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80285ch:120h80",expand:!0,children:[{id:5,deep:2,x:610,y:305,startY:285,w:100,h:80,gap:40,childrenHeight:120,content:" 285 ch:120 h0 ",expand:!0,children:[]}]},{id:3,deep:1,x:310,y:813,startY:793,w:100,h:80,gap:40,childrenHeight:120,content:"",expand:!0,children:[]},{id:4,deep:1,x:310,y:933,startY:913,w:100,h:80,gap:40,childrenHeight:120,content:"",expand:!0,children:[]}]}]}}},E=H,M=(n("de16"),Object(o["a"])(E,l,u,!1,null,null,null)),O=M.exports;a["a"].use(s["a"]);var Y=[{path:"/",name:"Home",component:O},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],D=new s["a"]({routes:Y}),N=D;a["a"].config.productionTip=!1,new a["a"]({router:N,render:function(t){return t(h)}}).$mount("#app")},"7f76":function(t,e,n){"use strict";var a=n("e670"),i=n.n(a);i.a},8256:function(t,e,n){"use strict";var a=n("f7a4"),i=n.n(a);i.a},"85ec":function(t,e,n){},"8d91":function(t,e,n){},de16:function(t,e,n){"use strict";var a=n("8d91"),i=n.n(a);i.a},e670:function(t,e,n){},f7a4:function(t,e,n){}});
//# sourceMappingURL=app.409c1275.js.map